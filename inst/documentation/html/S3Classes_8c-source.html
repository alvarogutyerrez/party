<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>party: S3Classes.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>S3Classes.c</h1><a href="S3Classes_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00009 <span class="preprocessor">#include "<a class="code" href="party_8h.html">party.h</a>"</span>
00010                 
<a name="l00011"></a><a class="code" href="S3Classes_8h.html#a0">00011</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a0">C_init_node</a>(SEXP node, <span class="keywordtype">int</span> nobs, <span class="keywordtype">int</span> ninputs, <span class="keywordtype">int</span> nsurr, <span class="keywordtype">int</span> q) {
00012 
00013     SEXP nodeID, weights, criterion, primarysplit, surrogatesplits, 
00014          terminal, prediction;
00015 
00016     <span class="keywordflow">if</span> (LENGTH(node) &lt; <a class="code" href="party_8h.html#a9">NODE_LENGTH</a>)
00017         error(<span class="stringliteral">"node is not a list with at least %s elements"</span>, <a class="code" href="party_8h.html#a9">NODE_LENGTH</a>);
00018         
00019     SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a0">S3_NODEID</a>, nodeID = allocVector(INTSXP, 1));
00020     <span class="keywordflow">if</span> (nobs &gt; 0) 
00021         SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a1">S3_WEIGHTS</a>, weights = allocVector(REALSXP, nobs));
00022     <span class="keywordflow">else</span>
00023         SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a1">S3_WEIGHTS</a>, R_NilValue);
00024     SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a2">S3_CRITERION</a>, 
00025         criterion = allocVector(VECSXP, <a class="code" href="party_8h.html#a13">CRITERION_LENGTH</a>));
00026     <span class="comment">/* teststats */</span>
00027     SET_VECTOR_ELT(criterion, <a class="code" href="party_8h.html#a10">S3_STATISTICS</a>, allocVector(REALSXP, ninputs)); 
00028     <span class="comment">/* criterion, aka pvalues */</span>
00029     SET_VECTOR_ELT(criterion, <a class="code" href="party_8h.html#a11">S3_iCRITERION</a>, allocVector(REALSXP, ninputs));
00030     <span class="comment">/* max(criterion) */</span>
00031     SET_VECTOR_ELT(criterion, <a class="code" href="party_8h.html#a12">S3_MAXCRITERION</a>, allocVector(REALSXP, 1)); 
00032     SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a3">S3_TERMINAL</a>, terminal = allocVector(LGLSXP, 1));
00033     INTEGER(terminal)[0] = 0;
00034     SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a4">S3_PSPLIT</a>, 
00035         primarysplit = allocVector(VECSXP, <a class="code" href="party_8h.html#a20">SPLIT_LENGTH</a>));
00036     SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a5">S3_SSPLIT</a>, 
00037                    surrogatesplits = allocVector(VECSXP, nsurr));
00038     SET_VECTOR_ELT(node, <a class="code" href="party_8h.html#a6">S3_PREDICTION</a>, prediction = allocVector(REALSXP, q));
00039 
00040 }
00041 
<a name="l00042"></a><a class="code" href="S3Classes_8h.html#a1">00042</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a1">S3set_nodeID</a>(SEXP node, <span class="keywordtype">int</span> nodeID) {
00043     INTEGER(VECTOR_ELT(node, <a class="code" href="party_8h.html#a0">S3_NODEID</a>))[0] = nodeID;
00044 }
00045 
<a name="l00046"></a><a class="code" href="S3Classes_8h.html#a2">00046</a> <span class="keywordtype">int</span> <a class="code" href="S3Classes_8c.html#a2">S3get_nodeID</a>(SEXP node) {
00047     <span class="keywordflow">return</span>(INTEGER(VECTOR_ELT(node, <a class="code" href="party_8h.html#a0">S3_NODEID</a>))[0]);
00048 }
00049 
<a name="l00050"></a><a class="code" href="S3Classes_8h.html#a3">00050</a> SEXP <a class="code" href="S3Classes_8c.html#a3">S3get_nodeweights</a>(SEXP node) {
00051     SEXP ans;
00052     
00053     ans = VECTOR_ELT(node, <a class="code" href="party_8h.html#a1">S3_WEIGHTS</a>);
00054     <span class="keywordflow">if</span> (ans == R_NilValue)
00055         error(<span class="stringliteral">"node has no weights element"</span>); 
00056     <span class="keywordflow">return</span>(VECTOR_ELT(node, <a class="code" href="party_8h.html#a1">S3_WEIGHTS</a>));
00057 }
00058 
<a name="l00059"></a><a class="code" href="S3Classes_8h.html#a4">00059</a> SEXP <a class="code" href="S3Classes_8c.html#a4">S3get_teststat</a>(SEXP node) {
00060     <span class="keywordflow">return</span>(VECTOR_ELT(VECTOR_ELT(node, <a class="code" href="party_8h.html#a2">S3_CRITERION</a>), <a class="code" href="party_8h.html#a10">S3_STATISTICS</a>));
00061 }
00062 
<a name="l00063"></a><a class="code" href="S3Classes_8h.html#a5">00063</a> SEXP <a class="code" href="S3Classes_8c.html#a5">S3get_criterion</a>(SEXP node) {
00064     <span class="keywordflow">return</span>(VECTOR_ELT(VECTOR_ELT(node, <a class="code" href="party_8h.html#a2">S3_CRITERION</a>), <a class="code" href="party_8h.html#a11">S3_iCRITERION</a>));
00065 }
00066 
<a name="l00067"></a><a class="code" href="S3Classes_8h.html#a6">00067</a> SEXP <a class="code" href="S3Classes_8c.html#a6">S3get_maxcriterion</a>(SEXP node) {
00068     <span class="keywordflow">return</span>(VECTOR_ELT(VECTOR_ELT(node, <a class="code" href="party_8h.html#a2">S3_CRITERION</a>), <a class="code" href="party_8h.html#a12">S3_MAXCRITERION</a>));
00069 }
00070 
<a name="l00071"></a><a class="code" href="S3Classes_8h.html#a7">00071</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a7">S3set_nodeterminal</a>(SEXP node) {
00072     INTEGER(VECTOR_ELT(node, <a class="code" href="party_8h.html#a3">S3_TERMINAL</a>))[0] = 1;
00073 }
00074 
<a name="l00075"></a><a class="code" href="S3Classes_8h.html#a8">00075</a> <span class="keywordtype">int</span> <a class="code" href="S3Classes_8c.html#a8">S3get_nodeterminal</a>(SEXP node) {
00076     <span class="keywordflow">return</span>(INTEGER(VECTOR_ELT(node, <a class="code" href="party_8h.html#a3">S3_TERMINAL</a>))[0]);
00077 }
00078 
<a name="l00079"></a><a class="code" href="S3Classes_8h.html#a9">00079</a> SEXP <a class="code" href="S3Classes_8c.html#a9">S3get_primarysplit</a>(SEXP node) {
00080     <span class="keywordflow">return</span>(VECTOR_ELT(node, <a class="code" href="party_8h.html#a4">S3_PSPLIT</a>));
00081 }
00082 
<a name="l00083"></a><a class="code" href="S3Classes_8h.html#a10">00083</a> SEXP <a class="code" href="S3Classes_8c.html#a10">S3get_surrogatesplits</a>(SEXP node) {
00084     <span class="keywordflow">return</span>(VECTOR_ELT(node, <a class="code" href="party_8h.html#a5">S3_SSPLIT</a>));
00085 }
00086 
<a name="l00087"></a><a class="code" href="S3Classes_8h.html#a11">00087</a> SEXP <a class="code" href="S3Classes_8c.html#a11">S3get_prediction</a>(SEXP node) {
00088     <span class="keywordflow">return</span>(VECTOR_ELT(node, <a class="code" href="party_8h.html#a6">S3_PREDICTION</a>));
00089 }
00090 
<a name="l00091"></a><a class="code" href="S3Classes_8h.html#a21">00091</a> SEXP <a class="code" href="S3Classes_8c.html#a12">S3get_leftnode</a>(SEXP node) {
00092     <span class="keywordflow">return</span>(VECTOR_ELT(node, <a class="code" href="party_8h.html#a7">S3_LEFT</a>));
00093 }
00094 
<a name="l00095"></a><a class="code" href="S3Classes_8h.html#a22">00095</a> SEXP <a class="code" href="S3Classes_8c.html#a13">S3get_rightnode</a>(SEXP node) {
00096     <span class="keywordflow">return</span>(VECTOR_ELT(node, <a class="code" href="party_8h.html#a8">S3_RIGHT</a>));
00097 }
00098 
<a name="l00099"></a><a class="code" href="S3Classes_8h.html#a12">00099</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a14">C_init_orderedsplit</a>(SEXP split, <span class="keywordtype">int</span> nobs) {
00100     
00101     SEXP variableID, splitpoint, splitstatistics, ordered, toleft;
00102     
00103     <span class="keywordflow">if</span> (LENGTH(split) &lt; <a class="code" href="party_8h.html#a20">SPLIT_LENGTH</a>)
00104         error(<span class="stringliteral">"split is not a list with at least %s elements"</span>, <a class="code" href="party_8h.html#a20">SPLIT_LENGTH</a>);
00105         
00106     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a14">S3_VARIABLEID</a>, 
00107                    variableID = allocVector(INTSXP, 1));
00108     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a15">S3_ORDERED</a>, 
00109                     ordered = allocVector(LGLSXP, 1));
00110     INTEGER(ordered)[0] = 1;
00111     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a16">S3_SPLITPOINT</a>, 
00112                    splitpoint = allocVector(REALSXP, 1));
00113     <span class="keywordflow">if</span> (nobs &gt; 0)
00114         SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a17">S3_SPLITSTATISTICS</a>, 
00115                        splitstatistics = allocVector(REALSXP, nobs));
00116     <span class="keywordflow">else</span>
00117         SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a17">S3_SPLITSTATISTICS</a>, R_NilValue);
00118     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a18">S3_TOLEFT</a>, toleft = allocVector(INTSXP, 1));
00119     INTEGER(toleft)[0] = 1;
00120     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a19">S3_TABLE</a>, R_NilValue);
00121 }
00122 
<a name="l00123"></a><a class="code" href="S3Classes_8h.html#a13">00123</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a15">C_init_nominalsplit</a>(SEXP split, <span class="keywordtype">int</span> nlevels, <span class="keywordtype">int</span> nobs) {
00124     
00125     SEXP variableID, splitpoint, splitstatistics, ordered, toleft, table;
00126     
00127     <span class="keywordflow">if</span> (LENGTH(split) &lt; <a class="code" href="party_8h.html#a20">SPLIT_LENGTH</a>)
00128         error(<span class="stringliteral">"split is not a list with at least %s elements"</span>, <a class="code" href="party_8h.html#a20">SPLIT_LENGTH</a>);
00129 
00130     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a14">S3_VARIABLEID</a>, variableID = allocVector(INTSXP, 1));
00131     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a15">S3_ORDERED</a>, ordered = allocVector(LGLSXP, 1));
00132     INTEGER(ordered)[0] = 0;
00133     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a16">S3_SPLITPOINT</a>, 
00134                    splitpoint = allocVector(INTSXP, nlevels));
00135     <span class="keywordflow">if</span> (nobs &gt; 0)
00136         SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a17">S3_SPLITSTATISTICS</a>, 
00137                        splitstatistics = allocVector(REALSXP, nobs));
00138     <span class="keywordflow">else</span>
00139         SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a17">S3_SPLITSTATISTICS</a>, R_NilValue);
00140     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a18">S3_TOLEFT</a>, toleft = allocVector(INTSXP, 1));
00141     INTEGER(toleft)[0] = 1;
00142     SET_VECTOR_ELT(split, <a class="code" href="party_8h.html#a19">S3_TABLE</a>, table = allocVector(INTSXP, nlevels));
00143 }
00144 
<a name="l00145"></a><a class="code" href="S3Classes_8h.html#a14">00145</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a16">S3set_variableID</a>(SEXP split, <span class="keywordtype">int</span> variableID) {
00146     INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a14">S3_VARIABLEID</a>))[0] = variableID;
00147 }
00148 
<a name="l00149"></a><a class="code" href="S3Classes_8h.html#a15">00149</a> <span class="keywordtype">int</span> <a class="code" href="S3Classes_8c.html#a17">S3get_variableID</a>(SEXP split) {
00150     <span class="keywordflow">return</span>(INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a14">S3_VARIABLEID</a>))[0]);
00151 }
00152 
<a name="l00153"></a><a class="code" href="S3Classes_8h.html#a16">00153</a> <span class="keywordtype">int</span> <a class="code" href="S3Classes_8c.html#a18">S3is_ordered</a>(SEXP split) {
00154     <span class="keywordflow">return</span>(INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a15">S3_ORDERED</a>))[0]);
00155 }
00156 
<a name="l00157"></a><a class="code" href="S3Classes_8h.html#a17">00157</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a19">S3set_ordered</a>(SEXP split) {
00158     INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a15">S3_ORDERED</a>))[0] = 1;
00159 }
00160 
<a name="l00161"></a><a class="code" href="S3Classes_8h.html#a18">00161</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a20">S3set_nominal</a>(SEXP split) {
00162     INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a15">S3_ORDERED</a>))[0] = 0;
00163 }
00164 
<a name="l00165"></a><a class="code" href="S3Classes_8h.html#a24">00165</a> <span class="keywordtype">int</span> <a class="code" href="S3Classes_8c.html#a21">S3get_toleft</a>(SEXP split) {
00166     <span class="keywordflow">return</span>(INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a18">S3_TOLEFT</a>))[0]);
00167 }
00168 
<a name="l00169"></a><a class="code" href="S3Classes_8h.html#a25">00169</a> <span class="keywordtype">void</span> <a class="code" href="S3Classes_8c.html#a22">S3set_toleft</a>(SEXP split, <span class="keywordtype">int</span> left) {
00170     <span class="comment">/* &lt;FIXME&gt; use LOGICAL here? &lt;/FIXME&gt; */</span>
00171     INTEGER(VECTOR_ELT(split, <a class="code" href="party_8h.html#a18">S3_TOLEFT</a>))[0] = left;
00172 }
00173 
<a name="l00174"></a><a class="code" href="S3Classes_8h.html#a19">00174</a> SEXP <a class="code" href="S3Classes_8c.html#a23">S3get_splitpoint</a>(SEXP split) {
00175    <span class="keywordflow">return</span>(VECTOR_ELT(split, <a class="code" href="party_8h.html#a16">S3_SPLITPOINT</a>));
00176 }
00177    
<a name="l00178"></a><a class="code" href="S3Classes_8h.html#a20">00178</a> SEXP <a class="code" href="S3Classes_8c.html#a24">S3get_splitstatistics</a>(SEXP split) {
00179    SEXP ans;
00180    
00181    ans = VECTOR_ELT(split, <a class="code" href="party_8h.html#a17">S3_SPLITSTATISTICS</a>);
00182    <span class="keywordflow">if</span> (ans == R_NilValue)
00183        error(<span class="stringliteral">"split does not have a splitstatistics element"</span>);
00184    <span class="keywordflow">return</span>(ans);
00185 }
00186 
<a name="l00187"></a><a class="code" href="S3Classes_8h.html#a23">00187</a> SEXP <a class="code" href="S3Classes_8c.html#a25">S3get_table</a>(SEXP split) {
00188    SEXP ans;
00189    
00190    ans = VECTOR_ELT(split, <a class="code" href="party_8h.html#a19">S3_TABLE</a>);
00191    <span class="keywordflow">if</span> (ans == R_NilValue)
00192        error(<span class="stringliteral">"split does not have a table element"</span>);
00193    <span class="keywordflow">return</span>(ans);
00194 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Feb 16 09:11:58 2006 for party by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
