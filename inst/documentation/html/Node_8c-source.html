<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>party: Node.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_6c30642956b040afcd6ed9c9ec492c91.html">src</a>
  </div>
</div>
</div>
<h1>Node.c</h1><a href="Node_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="party_8h.html">party.h</a>"</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 
<a name="l00022"></a><a class="code" href="Node_8c.html#ccc1b172efcfd43dc460efee333b6abf">00022</a> <span class="keywordtype">void</span> <a class="code" href="Node_8c.html#ccc1b172efcfd43dc460efee333b6abf">C_prediction</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> *y, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> q, <span class="keyword">const</span> <span class="keywordtype">double</span> *weights, 
<a name="l00023"></a>00023                   <span class="keyword">const</span> <span class="keywordtype">double</span> sweights, <span class="keywordtype">double</span> *ans) {
<a name="l00024"></a>00024 
<a name="l00025"></a>00025     <span class="keywordtype">int</span> i, j, jn;
<a name="l00026"></a>00026     
<a name="l00027"></a>00027     <span class="keywordflow">for</span> (j = 0; j &lt; q; j++) {
<a name="l00028"></a>00028         ans[j] = 0.0;
<a name="l00029"></a>00029         jn = j * n;
<a name="l00030"></a>00030         <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) 
<a name="l00031"></a>00031             ans[j] += weights[i] * y[jn + i];
<a name="l00032"></a>00032         ans[j] = ans[j] / sweights;
<a name="l00033"></a>00033     }
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 
<a name="l00048"></a><a class="code" href="Node_8h.html#0ed8b15b2c14ec9f1f1585d6288a38e2">00048</a> <span class="keywordtype">void</span> <a class="code" href="Node_8c.html#0ed8b15b2c14ec9f1f1585d6288a38e2">C_Node</a>(SEXP node, SEXP learnsample, SEXP weights, 
<a name="l00049"></a>00049             SEXP fitmem, SEXP controls, <span class="keywordtype">int</span> TERMINAL) {
<a name="l00050"></a>00050     
<a name="l00051"></a>00051     <span class="keywordtype">int</span> nobs, ninputs, jselect, q, j, k, i;
<a name="l00052"></a>00052     <span class="keywordtype">double</span> mincriterion, sweights, *dprediction;
<a name="l00053"></a>00053     <span class="keywordtype">double</span> *teststat, *pvalue, smax, cutpoint = 0.0, maxstat = 0.0;
<a name="l00054"></a>00054     <span class="keywordtype">double</span> *standstat, *splitstat;
<a name="l00055"></a>00055     SEXP responses, inputs, x, expcovinf, linexpcov;
<a name="l00056"></a>00056     SEXP varctrl, splitctrl, gtctrl, tgctrl, split, testy, predy;
<a name="l00057"></a>00057     <span class="keywordtype">double</span> *dxtransf, *dweights, *thisweights;
<a name="l00058"></a>00058     <span class="keywordtype">int</span> *itable;
<a name="l00059"></a>00059     
<a name="l00060"></a>00060     nobs = <a class="code" href="Classes_8c.html#45df17685bc6c95d03fb65b6f6214de0">get_nobs</a>(learnsample);
<a name="l00061"></a>00061     ninputs = <a class="code" href="Classes_8c.html#9117d8f57ea1378c725c7299d6cc2923">get_ninputs</a>(learnsample);
<a name="l00062"></a>00062     varctrl = <a class="code" href="Classes_8c.html#a7f64a77df0cfbcae9428aa6684a1ad1">get_varctrl</a>(controls);
<a name="l00063"></a>00063     splitctrl = <a class="code" href="Classes_8c.html#d914bd038dca4d2a1b9847f46bdb78f9">get_splitctrl</a>(controls);
<a name="l00064"></a>00064     gtctrl = <a class="code" href="Classes_8c.html#43fe1d056590d0d70d3a72beda13963e">get_gtctrl</a>(controls);
<a name="l00065"></a>00065     tgctrl = <a class="code" href="Classes_8c.html#a88e9e2563188b5500b48a6efaee9734">get_tgctrl</a>(controls);
<a name="l00066"></a>00066     mincriterion = <a class="code" href="Classes_8c.html#3578ef4fb8f0c3ecd7d166687acde94a">get_mincriterion</a>(gtctrl);
<a name="l00067"></a>00067     responses = GET_SLOT(learnsample, <a class="code" href="Classes_8c.html#9ad5f5cd65458d95a8ffae2d450ec850">PL2_responsesSym</a>);
<a name="l00068"></a>00068     inputs = GET_SLOT(learnsample, <a class="code" href="Classes_8c.html#a0f1db0215808916904d250b11f71edd">PL2_inputsSym</a>);
<a name="l00069"></a>00069     testy = <a class="code" href="Classes_8c.html#9ec50a13a7c7e82143cced16ff4f3968">get_test_trafo</a>(responses);
<a name="l00070"></a>00070     predy = <a class="code" href="Classes_8c.html#b86d70ff194260cc9bd391d3ff55b157">get_predict_trafo</a>(responses);
<a name="l00071"></a>00071     q = <a class="code" href="Utils_8c.html#f1f46cc3e98630497a1ccb21d943fe65">ncol</a>(testy);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="comment">/* &lt;FIXME&gt; we compute C_GlobalTest even for TERMINAL nodes! &lt;/FIXME&gt; */</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     <span class="comment">/* compute the test statistics and the node criteria for each input */</span>        
<a name="l00076"></a>00076     <a class="code" href="IndependenceTest_8c.html#0de2357bd1d38058c0cfc68c3e743b34">C_GlobalTest</a>(learnsample, weights, fitmem, varctrl,
<a name="l00077"></a>00077                  gtctrl, <a class="code" href="Classes_8c.html#024b7f74a61afa9b3eb465a98f35584c">get_minsplit</a>(splitctrl), 
<a name="l00078"></a>00078                  REAL(<a class="code" href="S3Classes_8c.html#174b61cf01697f1693e14e449611563c">S3get_teststat</a>(node)), REAL(<a class="code" href="S3Classes_8c.html#7e1195f9e99aa93145f04e80c62ff687">S3get_criterion</a>(node)));
<a name="l00079"></a>00079     
<a name="l00080"></a>00080     <span class="comment">/* sum of weights: C_GlobalTest did nothing if sweights &lt; mincriterion */</span>
<a name="l00081"></a>00081     sweights = REAL(GET_SLOT(GET_SLOT(fitmem, <a class="code" href="Classes_8c.html#4d117ff485f06bee9902f99246ac9c04">PL2_expcovinfSym</a>), 
<a name="l00082"></a>00082                              <a class="code" href="Classes_8c.html#72d079f51635b70b0a19dfe3bc6716c8">PL2_sumweightsSym</a>))[0];
<a name="l00083"></a>00083     REAL(VECTOR_ELT(node, <a class="code" href="party_8h.html#03408349cc8dbd04a36733dfebffbacf">S3_SUMWEIGHTS</a>))[0] = sweights;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     <span class="comment">/* compute the prediction of this node */</span>
<a name="l00086"></a>00086     dprediction = REAL(<a class="code" href="S3Classes_8c.html#70a340b301b4e383107c92cbbeb4ae20">S3get_prediction</a>(node));
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     <span class="comment">/* &lt;FIXME&gt; feed raw numeric values OR dummy encoded factors as y </span>
<a name="l00089"></a>00089 <span class="comment">       Problem: what happens for survival times ? */</span>
<a name="l00090"></a>00090     <a class="code" href="Node_8c.html#ccc1b172efcfd43dc460efee333b6abf">C_prediction</a>(REAL(predy), nobs, <a class="code" href="Utils_8c.html#f1f46cc3e98630497a1ccb21d943fe65">ncol</a>(predy), REAL(weights), 
<a name="l00091"></a>00091                      sweights, dprediction);
<a name="l00092"></a>00092     <span class="comment">/* &lt;/FIXME&gt; */</span>
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     teststat = REAL(<a class="code" href="S3Classes_8c.html#174b61cf01697f1693e14e449611563c">S3get_teststat</a>(node));
<a name="l00095"></a>00095     pvalue = REAL(<a class="code" href="S3Classes_8c.html#7e1195f9e99aa93145f04e80c62ff687">S3get_criterion</a>(node));
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="comment">/* try the two out of ninputs best inputs variables */</span>
<a name="l00098"></a>00098     <span class="comment">/* &lt;FIXME&gt; be more flexible and add a parameter controlling</span>
<a name="l00099"></a>00099 <span class="comment">               the number of inputs tried &lt;/FIXME&gt; */</span>
<a name="l00100"></a>00100     <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         smax = <a class="code" href="Utils_8c.html#5b306a6923d1155e6ce877cf6fa12a42">C_max</a>(pvalue, ninputs);
<a name="l00103"></a>00103         REAL(<a class="code" href="S3Classes_8c.html#e5d3e3ccef4e5fbfe1b6cf683b4d2999">S3get_maxcriterion</a>(node))[0] = smax;
<a name="l00104"></a>00104     
<a name="l00105"></a>00105         <span class="comment">/* if the global null hypothesis was rejected */</span>
<a name="l00106"></a>00106         <span class="keywordflow">if</span> (smax &gt; mincriterion &amp;&amp; !TERMINAL) {
<a name="l00107"></a>00107 
<a name="l00108"></a>00108             <span class="comment">/* the input variable with largest association to the response */</span>
<a name="l00109"></a>00109             jselect = <a class="code" href="Utils_8c.html#2a701345082320c18e49d8e7e8150d64">C_whichmax</a>(pvalue, teststat, ninputs) + 1;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111             <span class="comment">/* get the raw numeric values or the codings of a factor */</span>
<a name="l00112"></a>00112             x = <a class="code" href="Classes_8c.html#0f91efa916e815ec7d90c6f9516f18e4">get_variable</a>(inputs, jselect);
<a name="l00113"></a>00113             <span class="keywordflow">if</span> (<a class="code" href="Classes_8c.html#50548fbe6024d9a7118db3fce5085fd9">has_missings</a>(inputs, jselect)) {
<a name="l00114"></a>00114                 expcovinf = GET_SLOT(<a class="code" href="Classes_8c.html#31bf6c4f0764bc42b413cc319a0f9ec2">get_varmemory</a>(fitmem, jselect), 
<a name="l00115"></a>00115                                     <a class="code" href="Classes_8c.html#4d117ff485f06bee9902f99246ac9c04">PL2_expcovinfSym</a>);
<a name="l00116"></a>00116                 thisweights = <a class="code" href="Utils_8c.html#f9716d8427688ac52d3dd254337316b1">C_tempweights</a>(jselect, weights, fitmem, inputs);
<a name="l00117"></a>00117             } <span class="keywordflow">else</span> {
<a name="l00118"></a>00118                 expcovinf = GET_SLOT(fitmem, <a class="code" href="Classes_8c.html#4d117ff485f06bee9902f99246ac9c04">PL2_expcovinfSym</a>);
<a name="l00119"></a>00119                 thisweights = REAL(weights);
<a name="l00120"></a>00120             }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122             <span class="comment">/* &lt;FIXME&gt; handle ordered factors separatly??? &lt;/FIXME&gt; */</span>
<a name="l00123"></a>00123             <span class="keywordflow">if</span> (!<a class="code" href="Classes_8c.html#f836613ade2cdc01c401b574fc1e7fdb">is_nominal</a>(inputs, jselect)) {
<a name="l00124"></a>00124             
<a name="l00125"></a>00125                 <span class="comment">/* search for a split in a ordered variable x */</span>
<a name="l00126"></a>00126                 split = <a class="code" href="S3Classes_8c.html#220373298b30f12b22f82cce3c996a37">S3get_primarysplit</a>(node);
<a name="l00127"></a>00127                 
<a name="l00128"></a>00128                 <span class="comment">/* check if the n-vector of splitstatistics </span>
<a name="l00129"></a>00129 <span class="comment">                   should be returned for each primary split */</span>
<a name="l00130"></a>00130                 <span class="keywordflow">if</span> (<a class="code" href="Classes_8c.html#2c17918334d53626178a38518f9f25ff">get_savesplitstats</a>(tgctrl)) {
<a name="l00131"></a>00131                     <a class="code" href="S3Classes_8c.html#c727b2483cf36cd256889ac9f8203258">C_init_orderedsplit</a>(split, nobs);
<a name="l00132"></a>00132                     splitstat = REAL(<a class="code" href="S3Classes_8c.html#a22b5c06c2e2e7ad8bf873df35a8bb99">S3get_splitstatistics</a>(split));
<a name="l00133"></a>00133                 } <span class="keywordflow">else</span> {
<a name="l00134"></a>00134                     <a class="code" href="S3Classes_8c.html#c727b2483cf36cd256889ac9f8203258">C_init_orderedsplit</a>(split, 0);
<a name="l00135"></a>00135                     splitstat = REAL(<a class="code" href="Classes_8c.html#3a0ec14f5047b8c9bf8d8e6ba3c6e306">get_splitstatistics</a>(fitmem));
<a name="l00136"></a>00136                 }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138                 <a class="code" href="Splits_8c.html#00d4080fae6513962bd1e54ec9d476bc">C_split</a>(REAL(x), 1, REAL(testy), q, thisweights, nobs,
<a name="l00139"></a>00139                         INTEGER(<a class="code" href="Classes_8c.html#a160107e2d687d3fa2411af7e25763ef">get_ordering</a>(inputs, jselect)), splitctrl, 
<a name="l00140"></a>00140                         GET_SLOT(fitmem, <a class="code" href="Classes_8c.html#adb3a293553f93d6233d9ba4ab7d1039">PL2_linexpcov2sampleSym</a>),
<a name="l00141"></a>00141                         expcovinf, REAL(<a class="code" href="S3Classes_8c.html#acf87d496fd3b07bafd171c92404212a">S3get_splitpoint</a>(split)), &amp;maxstat,
<a name="l00142"></a>00142                         splitstat);
<a name="l00143"></a>00143                 <a class="code" href="S3Classes_8c.html#06ea5a46f63ebc5c27c005610dc6f8fc">S3set_variableID</a>(split, jselect);
<a name="l00144"></a>00144              } <span class="keywordflow">else</span> {
<a name="l00145"></a>00145            
<a name="l00146"></a>00146                  <span class="comment">/* search of a set of levels (split) in a numeric variable x */</span>
<a name="l00147"></a>00147                  split = <a class="code" href="S3Classes_8c.html#220373298b30f12b22f82cce3c996a37">S3get_primarysplit</a>(node);
<a name="l00148"></a>00148                  
<a name="l00149"></a>00149                 <span class="comment">/* check if the n-vector of splitstatistics </span>
<a name="l00150"></a>00150 <span class="comment">                   should be returned for each primary split */</span>
<a name="l00151"></a>00151                 <span class="keywordflow">if</span> (<a class="code" href="Classes_8c.html#2c17918334d53626178a38518f9f25ff">get_savesplitstats</a>(tgctrl)) {
<a name="l00152"></a>00152                     <a class="code" href="S3Classes_8c.html#07230eaacca448a8235ea7760adbfa04">C_init_nominalsplit</a>(split, 
<a name="l00153"></a>00153                         LENGTH(<a class="code" href="Classes_8c.html#0e317821da8f3bc0fb6da5006abb81f6">get_levels</a>(inputs, jselect)), 
<a name="l00154"></a>00154                         nobs);
<a name="l00155"></a>00155                     splitstat = REAL(<a class="code" href="S3Classes_8c.html#a22b5c06c2e2e7ad8bf873df35a8bb99">S3get_splitstatistics</a>(split));
<a name="l00156"></a>00156                 } <span class="keywordflow">else</span> {
<a name="l00157"></a>00157                     <a class="code" href="S3Classes_8c.html#07230eaacca448a8235ea7760adbfa04">C_init_nominalsplit</a>(split, 
<a name="l00158"></a>00158                         LENGTH(<a class="code" href="Classes_8c.html#0e317821da8f3bc0fb6da5006abb81f6">get_levels</a>(inputs, jselect)), 
<a name="l00159"></a>00159                         0);
<a name="l00160"></a>00160                     splitstat = REAL(<a class="code" href="Classes_8c.html#3a0ec14f5047b8c9bf8d8e6ba3c6e306">get_splitstatistics</a>(fitmem));
<a name="l00161"></a>00161                 }
<a name="l00162"></a>00162           
<a name="l00163"></a>00163                  linexpcov = <a class="code" href="Classes_8c.html#31bf6c4f0764bc42b413cc319a0f9ec2">get_varmemory</a>(fitmem, jselect);
<a name="l00164"></a>00164                  standstat = Calloc(<a class="code" href="Classes_8c.html#8bc9164a2291bb7f61c12b79f6bc7c5f">get_dimension</a>(linexpcov), <span class="keywordtype">double</span>);
<a name="l00165"></a>00165                  <a class="code" href="TestStatistic_8c.html#9ecf0700a00ad5fd64601bf718f20439">C_standardize</a>(REAL(GET_SLOT(linexpcov, 
<a name="l00166"></a>00166                                              <a class="code" href="Classes_8c.html#e36e22e2f694307e4d5af6dade35abc6">PL2_linearstatisticSym</a>)),
<a name="l00167"></a>00167                                REAL(GET_SLOT(linexpcov, <a class="code" href="Classes_8c.html#f0a2dc8073174e68e71d4d19266bab22">PL2_expectationSym</a>)),
<a name="l00168"></a>00168                                REAL(GET_SLOT(linexpcov, <a class="code" href="Classes_8c.html#e033132aed4900e99ec36faf7352ea34">PL2_covarianceSym</a>)),
<a name="l00169"></a>00169                                <a class="code" href="Classes_8c.html#8bc9164a2291bb7f61c12b79f6bc7c5f">get_dimension</a>(linexpcov), <a class="code" href="Classes_8c.html#aa5df349ffd6e5faccab211ac972722b">get_tol</a>(splitctrl), 
<a name="l00170"></a>00170                                standstat);
<a name="l00171"></a>00171  
<a name="l00172"></a>00172                  <a class="code" href="Splits_8c.html#1b9f04a865d61c1c9757ba77bff49ab7">C_splitcategorical</a>(INTEGER(x), 
<a name="l00173"></a>00173                                     LENGTH(<a class="code" href="Classes_8c.html#0e317821da8f3bc0fb6da5006abb81f6">get_levels</a>(inputs, jselect)), 
<a name="l00174"></a>00174                                     REAL(testy), q, thisweights, 
<a name="l00175"></a>00175                                     nobs, standstat, splitctrl, 
<a name="l00176"></a>00176                                     GET_SLOT(fitmem, <a class="code" href="Classes_8c.html#adb3a293553f93d6233d9ba4ab7d1039">PL2_linexpcov2sampleSym</a>),
<a name="l00177"></a>00177                                     expcovinf, &amp;cutpoint, 
<a name="l00178"></a>00178                                     INTEGER(<a class="code" href="S3Classes_8c.html#acf87d496fd3b07bafd171c92404212a">S3get_splitpoint</a>(split)),
<a name="l00179"></a>00179                                     &amp;maxstat, splitstat);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181                  <span class="comment">/* compute which levels of a factor are available in this node </span>
<a name="l00182"></a>00182 <span class="comment">                    (for printing) later on. A real `table' for this node would</span>
<a name="l00183"></a>00183 <span class="comment">                    induce too much overhead here. Maybe later. */</span>
<a name="l00184"></a>00184                     
<a name="l00185"></a>00185                  itable = INTEGER(<a class="code" href="S3Classes_8c.html#ab4c2cafa901e0303b662c1b1542099a">S3get_table</a>(split));
<a name="l00186"></a>00186                  dxtransf = REAL(<a class="code" href="Classes_8c.html#20a55355301b5f90ec48b9114d1ff597">get_transformation</a>(inputs, jselect));
<a name="l00187"></a>00187                  <span class="keywordflow">for</span> (k = 0; k &lt; LENGTH(<a class="code" href="Classes_8c.html#0e317821da8f3bc0fb6da5006abb81f6">get_levels</a>(inputs, jselect)); k++) {
<a name="l00188"></a>00188                      itable[k] = 0;
<a name="l00189"></a>00189                      <span class="keywordflow">for</span> (i = 0; i &lt; nobs; i++) {
<a name="l00190"></a>00190                          <span class="keywordflow">if</span> (dxtransf[k * nobs + i] * thisweights[i] &gt; 0) {
<a name="l00191"></a>00191                              itable[k] = 1;
<a name="l00192"></a>00192                              <span class="keywordflow">continue</span>;
<a name="l00193"></a>00193                          }
<a name="l00194"></a>00194                      }
<a name="l00195"></a>00195                  }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197                  Free(standstat);
<a name="l00198"></a>00198             }
<a name="l00199"></a>00199             <span class="keywordflow">if</span> (maxstat == 0) {
<a name="l00200"></a>00200             
<a name="l00201"></a>00201                 <span class="keywordflow">if</span> (j == 1) {          
<a name="l00202"></a>00202                     <a class="code" href="S3Classes_8c.html#81cae2a178f2bb5562a12c974d966add">S3set_nodeterminal</a>(node);
<a name="l00203"></a>00203                 } <span class="keywordflow">else</span> {
<a name="l00204"></a>00204                     <span class="comment">/* do not look at jselect in next iteration */</span>
<a name="l00205"></a>00205                     pvalue[jselect - 1] = R_NegInf;
<a name="l00206"></a>00206                 }
<a name="l00207"></a>00207             } <span class="keywordflow">else</span> {
<a name="l00208"></a>00208                 <a class="code" href="S3Classes_8c.html#06ea5a46f63ebc5c27c005610dc6f8fc">S3set_variableID</a>(split, jselect);
<a name="l00209"></a>00209                 <span class="keywordflow">break</span>;
<a name="l00210"></a>00210             }
<a name="l00211"></a>00211         } <span class="keywordflow">else</span> {
<a name="l00212"></a>00212             <a class="code" href="S3Classes_8c.html#81cae2a178f2bb5562a12c974d966add">S3set_nodeterminal</a>(node);
<a name="l00213"></a>00213             <span class="keywordflow">break</span>;
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216 }       
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 
<a name="l00227"></a><a class="code" href="Node_8c.html#878214ca472c99cf036a426eb7cffb59">00227</a> SEXP <a class="code" href="Node_8c.html#878214ca472c99cf036a426eb7cffb59">R_Node</a>(SEXP learnsample, SEXP weights, SEXP fitmem, SEXP controls) {
<a name="l00228"></a>00228             
<a name="l00229"></a>00229      SEXP ans;
<a name="l00230"></a>00230      
<a name="l00231"></a>00231      PROTECT(ans = allocVector(VECSXP, <a class="code" href="party_8h.html#2594b3a85c654c34048133cb81ad0fab">NODE_LENGTH</a>));
<a name="l00232"></a>00232      <a class="code" href="S3Classes_8c.html#f837f0cf74c62c53c74138c4dbb9acc0">C_init_node</a>(ans, <a class="code" href="Classes_8c.html#45df17685bc6c95d03fb65b6f6214de0">get_nobs</a>(learnsample), <a class="code" href="Classes_8c.html#9117d8f57ea1378c725c7299d6cc2923">get_ninputs</a>(learnsample), 
<a name="l00233"></a>00233                  <a class="code" href="Classes_8c.html#b89e4da7a60580c3adbe7c4f4935581c">get_maxsurrogate</a>(<a class="code" href="Classes_8c.html#d914bd038dca4d2a1b9847f46bdb78f9">get_splitctrl</a>(controls)),
<a name="l00234"></a>00234                  <a class="code" href="Utils_8c.html#f1f46cc3e98630497a1ccb21d943fe65">ncol</a>(<a class="code" href="Classes_8c.html#b86d70ff194260cc9bd391d3ff55b157">get_predict_trafo</a>(GET_SLOT(learnsample, <a class="code" href="Classes_8c.html#9ad5f5cd65458d95a8ffae2d450ec850">PL2_responsesSym</a>))));
<a name="l00235"></a>00235 
<a name="l00236"></a>00236      <a class="code" href="Node_8c.html#0ed8b15b2c14ec9f1f1585d6288a38e2">C_Node</a>(ans, learnsample, weights, fitmem, controls, 0);
<a name="l00237"></a>00237      UNPROTECT(1);
<a name="l00238"></a>00238      <span class="keywordflow">return</span>(ans);
<a name="l00239"></a>00239 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jun 6 14:48:52 2008 for party by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
